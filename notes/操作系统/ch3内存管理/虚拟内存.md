# 虚拟内存

### 加速分页过程

在任何分页系统中，都需要考虑两个主要问题：

- 虚拟地址到物理地址到映射必须非常快
- 如果虚拟地址空间很大，页表也会很大

第一个问题是由于每次访问内存都需要进行虚拟地址到物理地址到映射，所有的指令最终都必须来内存，并且很多指令也会访问内存中的操作树。因此，每条指令进行一两次或更多页表访问是必要的。如果执行一条指令需要1ns，页表查询必须在0.2ns之内完成，避免映射称为一个主要瓶颈。

第二个问题来自现代计算机使用至少32位的虚拟地址，64位也很多。一台可用产生16位地址的计算机，地址范围从0到64K-1（2的16次方），且这些地址是虚拟地址。而32位的计算机可用有2的32次方（4GB）个地址空间，如果页面大小为4KB， 那么可以有1048576(约100万)个页面，那么页表必然有100万条表项。