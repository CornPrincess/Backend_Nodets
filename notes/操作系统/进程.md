# 进程

> The most central concept in any operating system is the *process*: an abstraction of a running program.  Everything else hinges on this concept
>
> 操作系统最核心的概念是进程，这是对正在运行程序的一个抽象，操作系统的其他其他所有内容都是围绕着进程的概念展开的。

> In any multiprogramming system, the CPU switches from process to process quickly, running each for tens or hundreds of milliseconds. While, strictly speak- ing, at any one instant the CPU is running only one process, in the course of 1 sec- ond it may work on several of them, giving the illusion of parallelism. Sometimes people speak of **pseudoparallelism** in this context, to contrast it with the true hard- ware parallelism of **multiprocessor** systems (which have two or more CPUs shar- ing the same physical memory). Keeping track of multiple, parallel activities is hard for people to do. Therefore, operating system designers over the years have evolved a conceptual model (sequential processes) that makes parallelism easier to deal with. That model, its uses, and some of its consequences form the subject of this chapter.
>
> 在任何多道程序设计系统中，CPU由一个进程快速切换到另一个进程，是每个进程各运行几十或者几百毫秒。严格地说，在某一个瞬间，CPU只能运行一个进程。但在一秒钟内，它可能运行多个进程，这样就造成了并行（parallelism）的错觉，有时称之为伪并行（pesudoparallelism），以此来区分多处理器系统的真正硬件并行。

## 进程模型

在进程模型中，计算机上所有可运行的软件，通常也包括操作系统，被组织成若干顺序进程（sequential process），简称进程（process）。一个进程就是一个正在执行程序的实例，包括程序计数器，寄存器和变量的当前值。从概念上来说，每个进程拥有它自己的虚拟CPU。当然，实际上真正的CPU在各进程之间来回切换。这种快速的切换称之为**多道程序设计（multiprogramming）**。

**由于CPU在各进程之间来回进行快速切换，所以每个进程执行其运算的速度是不确定的，并且当同一进程再次运行时，其运算速度通常也不可再现。所以，在对进程编程时决不能对时序做任何想当然的假设。然而，大多数进程并不受CPU多道程序设计或其他进程相对速度的影响。**

> The difference between a process and a program is subtle, but absolutely cru- cial. An analogy may help you here. Consider a culinary-minded computer scien- tist who is baking a birthday cake for his young daughter. He has a birthday cake recipe and a kitchen well stocked with all the input: flour, eggs, sugar, extract of vanilla, and so on. In this analogy, the recipe is the program, that is, an algorithm expressed in some suitable notation, the computer scientist is the processor (CPU), and the cake ingredients are the input data. **The process is the activity consisting of our baker reading the recipe, fetching the ingredients, and baking the cake.**

一个进程是某种类型的一个活动，它有程序、输入、输出以及状态。单个处理器可以被若干进程共享，它使用某种调度算法决定何时停止一个进程的工作，并转而为另一个进程提供服务。

值得注意的是，如果一个程序运行了两遍，则算作两个进程。例如，可以同时启动两个QQ，操作系统可以使用他们的共享代码，因此只有一个副本放在内存，但这只是技术细节，不会改变有两个进程正在运行的概念。

## 进程的创建

