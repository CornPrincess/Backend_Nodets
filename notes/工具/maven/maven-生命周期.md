# Maven生命周期

我们在开发项目的时候，不断地在编译、测试、打包、部署等过程，**maven的生命周期就是对所有构建过程抽象与统一**，生命周期包含项目的清理、初始化、编译、测试、打包、集成测试、验证、部署、站点生成等几乎所有的过程。

Maven 的生命周期是抽象的，其实际行为都是由插件来完成，如 `package` 阶段的任务可能就会由 `maven-jar-plugin` 来完成，生命周期和插件两者协同工作，密不可分，这种思想与设计模式中的**模版方法**非常相似。

生命周期抽象了构建的各个步骤，定义了他们的次序，但是没有提供具体实现，其中具体的实现由插件来完成，每个够爱你步骤都可以绑定一个或者多个插件行为，而且 Maven 为大多数构建步骤编写并绑定了默认插件。

## 三套生命周期

Maven 有三套**相互独立**的生命周期，每个生命周期包含一些阶段（Phase），并且这些阶段是有顺序的，后面的阶段依赖于前面的阶段，用户和 Maven 最直接的交互方式就是调用这些生命周期阶段。相互独立体现在用户 可以单独调用一个生命周期的某个阶段，而不会对其他生命周期产生影响。

### clean 生命周期

| Clean生命周期阶段 | 完成工作                              |
| ----------------- | ------------------------------------- |
| pre-clean         | 执行一些需要在clean之前完成的工作     |
| clean             | 移除所有上一次构建生成的文件          |
| post-clean        | 执行一些需要在clean之后立刻完成的工作 |

命令“mvn clean”中的就是代表执行上面的clean阶段，**在一个生命周期中，运行某个阶段的时候，它之前的所有阶段都会被运行，也就是说，“mvn clean” 等同于 “mvn pre-clean clean” ，如果我们运行“mvn post-clean” ，那么 “pre-clean”，“clean” 都会被运行**。这是Maven很重要的一个规则，可以大大简化命令行的输入。

### default 生命周期

**Maven最重要就是的Default生命周期，也称构建生命周期，绝大部分工作都发生在这个生命周期中**，每个阶段的名称与功能如下：

## Reference

1. 《maven实战》
2. [Introduction to the Build Lifecycle](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)
3. [Maven总结之生命周期（二）](https://sq.163yun.com/blog/article/170712610677657600)

