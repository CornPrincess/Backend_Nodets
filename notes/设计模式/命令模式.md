# 命令模式

命令模式可以将“动作的请求者”吃不惯“动作的执行者”对象中解耦。

解耦一般都是通过抽象，多态的方法来完成，并且在这个过程中会使用到中介的角色。



命令模式： 将请求封装为对象，以便使用不同的请求，队列或者日志来参数化其他对象。命令模式也支持可撤销的操作。



命令模式的设计怎样支持请求调用者和请求接受者之间的解耦？

请求调用者调用的是命令对象，命令对象将接受者进行了封装，是“傻瓜”命令对象，这样命令对象通过委托的方式实现命令。请求调用者和请求接收者之间通过命令对象进行解耦。



## 命令模式的用途

- 队列请求：在某一端添加命令，然后另一端是线程。线程从队列中取出一个命令，然后调用它的execute方法，等待这个调用完成，然后将此命令对象丢弃，再取出下一个命令。**这样可以有效把运算限制在固定数目的线程中进行。工作队列类和进行计算的对象之间是完全解耦的。**

- 日志请求：在执行命令时将操作历史记录在磁盘中，一旦系统死机，我们可以用命令对象重新加载，并成批地依次调用这些对象的execute方法。
  - 电子表格错误恢复：将电子表格的操作记录在日志中，而不是每次电子表格一有变化就记录整个电子表格。
  - 事务处理：一整群操作必须全部继续完成，或者没有进行任何操作。
